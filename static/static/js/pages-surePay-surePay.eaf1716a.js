(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-surePay-surePay"],{"01b1":function(e,t,a){var n=a("d281");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("28b4f64c",n,!0,{sourceMap:!1,shadowMode:!1})},"17ef":function(e,t,a){"use strict";a.r(t);var n=a("bc67"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"18dc":function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d3b7"),a("c975"),a("ac1f"),a("466d"),a("a9e3"),a("d401"),a("25f0"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e");var n={getWeixinCode:function(){return new Promise((function(e,t){}))},getAlipayCode:function(){},checkPlatform:function(){var e={win:!1,mac:!1,xll:!1},t=navigator.platform;if(e.win=0==t.indexOf("Win"),e.mac=0==t.indexOf("Mac"),e.x11="X11"==t||0==t.indexOf("Linux"),e.win||e.mac||e.xll){var a=navigator.userAgent.toLowerCase();return a.indexOf("micromessenger")>-1?"pc-weixin":"pc"}return t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1?"ios":"android"},getH5Env:function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-weixin":"micromessenger"==e.match(/MicroMessenger/i)?"h5-weixin":"alipay"==e.match(/alipay/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-alipay":"alipay"==e.match(/alipay/i)?"h5-alipay":"h5"},timeFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;try{if(!e)return"";var n;"string"!==typeof e||isNaN(e)||(e=Number(e)),"number"===typeof e?(10==e.toString().length&&(e*=1e3),n=new Date(e)):n=e;var r=n.getTimezoneOffset(),i=60*r*1e3+60*a*60*1e3,o=n.getTime()+i;n=new Date(o);var p={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var c in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),p)new RegExp("("+c+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?p[c]:("00"+p[c]).substr((""+p[c]).length)));return t}catch(s){return e}}},r=n;t.default=r},"1c68":function(e,t,a){var n=a("8faa");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("365ce4b5",n,!0,{sourceMap:!1,shadowMode:!1})},"2b96":function(e,t,a){"use strict";(function(e){a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("e9c4"),a("d81d"),a("c975"),a("14d9"),a("a4d3"),a("e01a"),a("99af"),a("7db0"),a("d3b7"),a("c740"),a("a434");var r=n(a("c7eb")),i=n(a("1da1")),o=n(a("18dc")),p=e.importObject("uni-pay-co"),c={name:"uni-pay",emits:["success","cancel","fail","create","mounted","qrcode"],props:{adpid:{Type:String,default:""},toSuccessPage:{Type:Boolean,default:!0},returnUrl:{Type:String,default:""},mainColor:{Type:String,default:""},mode:{Type:String,default:""},logo:{Type:String,default:"/static/logo.png"},height:{Type:[String],default:"70vh"},debug:{Type:Boolean,default:!1}},data:function(){return{options:{},res:{},images:{wxpay:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAABC9JREFUeF7tWk1a20AMlUzv0bDr13AAYAOcpLCBcoqQU1DYEE6C2QAHIP26q3sPPOqniU2cZMYj+SeGxN5kEXlm9ObpjaQxwpY/uOX+Qw9Az4AtR6APgS0nQC+CfQi0FQLfrvcHXwAGPP4bQMK/fy5f7O9HehphwPfb/dOIogEhHQHBcamDCDESPoIxMQPTNSi1ABj+OrwDpNMaO5og4P2bMZOugFADwNTewWhU0/FVzAgnKZnxuoFQAbB3vX9MET7U2PHgq4R09vv8ZRI0bMhADMDw9uAhGN8NLQrWyAYRAGt1PgcRIU5TOms7JIIAdOL8nElJauikTRBKAdi7ObwioFFTzHaMw3mBzRV8DwKOXy+ertpagxcAq/YR/g2d6TlNrUDu4EiiE0Why4T1rgyINoXRC4DgjE+mF8+7RYAkp4RrRyVztRUKTgCkuz89fz4pAiB5z7WbklBrKxScAEgWxI6joZPXy5c4B0H0nkPdhzcHFIxxhHgZ8OA7AgMnAMObA479UnF6H5twQpF5RBMdibPDvB4AAAL6IZ0rNbTb9IngAyC8IwJ0K5okQBgzqFEKSV4wcXg17bxl8fIiJXFc0bHAgYLjYlHEFaZlVUQDoAIbcVZaN1VRrgAgUfImASiKW6Yh4pAohmHVQqpLABI0dMYiKhJPCeoV0ueuQsDmEJrkSeJ/bqNJnOqfApqVzWznzrdYWkvzhnUDYGnPKLTdV5gpfLiOqJUIaTefF8RKH6wxtAOX2IdA8NcCmmRItmBLfVF5jRBnR58kGQtWlGUJlBeAxpQ5A4eFKTu/ufLzPQv1f2mRRDiZ/nyyYwYrypI0OlQOc/9PsgshDsh2v+BUwTFnD3K5DglVlD4WlDZEsqywNgiK2F9gQBkLi7EtyV59WhBsiTURCjy5QZMgYRn9cxbZWgCQ+IKlnH2sFQYTURHmCYMgAJaKs9aYPkXNXGK6QhQdt9xeC4UhTC+eV/wVASASmrKj6IMA4NIBMQDsX1VN4IlbuU0K7vmiQS0G5EOpmiW6I1Dpjtp8pYc5yxYVj0RtXcMJcwDFSiqYLh2x+QgqAJwnAuEEydxbkZtdj+fKPVfwbPIq7KngqvMVX4WoAmDBAcH9HTMmXw23s0LJSlPOOsZx0l8VAu/0Fzjuc2Td3aY5zf1VoZgBvPgmvuhoIrFSMSXQThcDoJo0YLxGLfBSv5IINgVC1XxCOb/oZrkTBtRJqkQgKG6ROgPgPbGq/6HVIiYK51WngAj5ikbBhoZi3FALbHmozhlQXFChTc75g6wRM2ufzb9N/IwMcG0wg8HZJf9HBF/tFZnBBBH+cW/BpBDnd4XLDNJcon4oBiiY7jS194mEI0IaSz+12ygAclSYEcXvFsqA3UgANEzqAdCgtYm2PQM2cVc1PvUM0KC1ibY9AzZxVzU+bT0D/gPs/oxfcUEcJAAAAABJRU5ErkJggg==",alipay:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA2FJREFUeF7tmU122jAQx2cMB2hp9yULeK+naHISwhJyiIRDBJaQkwRO0fdgEWff0h4ANH0yFc+m+hhbckKNvJUsaX76z4ckhAv/8MLthwggKuDCCUQXuHABxCAYXSC6wIUTiC7wFgL4MPveTaj9optrO+696ya8yeQRQFRAdIEYAxoVBD/PNtdCwHWpDIJwr+1PMCk1DgAkCSx/jHrLsv/p+lfKAp3HzQOYDAqxKtcYBJPtXe/B1Y3TXgmATGst0WIrgAC7JmBINOQsNN8HE0zfVQFlFxzrgFgHNLQOkNJuQ7vrcgkS1CXEua5fgnDj+l+172CX/h59Tbn9Of0qBUE1cGe2ngPhLWeiEH0krFDBT63HC8Cnx/VtFuFDfgl90UOldDvuX4WcSo7lBSD0YuR4H6ebZwRNkRUw9xdSah1G+IzZmW5IW7ERDX/e9Rc+YwerBEMvQo1nrhfqkf/ZuYCxxK5J/t4AjkFQBi71CXxFoFSWq2XTlkn+AndXodNf5SwgT4J7gnttoNL6BqUEmCZET/tkvzQZYj5g1Sf/0goIkfcJYIkEK5HsFnkYnen6BXQptUb5lwJgMz4zCihXD/BqAwVDuoy+Uqx399kACrkZaYECVjY5qxJZXpoQwrcDHB6UghfVvPssAMo35W4R7oZVg5EMmAJxUCZ2CNzfVJ2Pm6qdleDBNwFClaHZdRrQAEhWe25VSPCuAMo1tnQhdIzMNUixfDYBqAOGVQEKQB15OFMCwXPV3QsFww7g73E39Pudr/Gn0EyplQPXCkBF/5AKsBtPKRA+AdKAEx/0BhYLL9nHFkhZLiBvbkOcxFzG5wPtoe7gBUrrTiMttqO+8ebZCkAtWErs17jHvrrSLcj+lkCpKeV5g/ABIA05lqgVM4Er2nPhZgev7DHGnToLG+ALIC9budgWwoRzyuMUPlzj8waVBuELIFOB5iksi7xIKQh8PS4wu8/j+a3vBScbRAgABVfg5BZbH6SFgP0kVIl7UCjNja4RCkAGwecaPLDhp4yNsSYkADlp/mncdNLLu8fpud9XQK7//wERGoBrAefSfgRBsLI9pTtPg+diUNV1yLuJypVg1Un/p/8arwDXZkQALkJNb48KaPoOu+yLCnARanp7VEDTd9hlX1SAi1DT2/8AaakVXysj5qkAAAAASUVORK5CYII="},originalRroviders:["wxpay","alipay"],currentProviders:["wxpay","alipay"]}},mounted:function(){var e=this;return(0,i.default)((0,r.default)().mark((function t(){var a;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,e.getPayProviderFromCloud();case 3:a=t.sent,0===a.errCode&&(e.originalRroviders=a.provider,e.currentProviders=JSON.parse(JSON.stringify(e.originalRroviders))),e.$emit("mounted",{images:e.images,originalRroviders:e.originalRroviders,currentProviders:e.currentProviders});case 6:case"end":return t.stop()}}),t)})))()},methods:{open:function(){var e=arguments,t=this;return(0,i.default)((0,r.default)().mark((function a(){var n,i;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},n.provider?(i=[],t.originalRroviders.map((function(e,t){n.provider.indexOf(e)>-1&&i.push(e)})),t.currentProviders=i,delete n.provider):t.currentProviders=JSON.parse(JSON.stringify(t.originalRroviders)),t.options=n,1!==t.currentProviders.length){a.next=7;break}t.createOrder({provider:t.currentProviders[0]}),a.next=11;break;case 7:if("pc"!==t.modeCom){a.next=10;break}return a.next=10,t._pcChooseProvider(t.currentProviders[0]);case 10:t.openPopup("payPopup");case 11:case"end":return a.stop()}}),a)})))()},createOrder:function(){var e=arguments,t=this;return(0,i.default)((0,r.default)().mark((function a(){var n,i,c,s;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:{},i=t.options,Object.assign(i,n),"appleiap"!==i.provider){a.next=5;break}return a.abrupt("return",t._appleiapCreateOrder(i));case 5:return"pc"===o.default.checkPlatform()&&(i.qr_code=!0),c={provider:i.provider,total_fee:i.total_fee,openid:void 0,order_no:i.order_no,out_trade_no:i.out_trade_no,description:i.description,type:i.type,qr_code:i.qr_code,custom:i.custom,other:i.other},i.openid&&"wxpay"===i.provider&&(c.openid=i.openid),a.prev=9,a.next=12,p.createOrder(c);case 12:s=a.sent,s.errCode?t.$emit("fail",s):(t.$emit("create",s),s.qr_code&&!i.cancel_popup?(t.res=s,"pc"===t.modeCom?(t.openPopup("payPopup"),t._pcChooseProvider(i.provider)):t.openPopup("qrcodePopup")):t.orderPayment(s)),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](9),t.$emit("fail",a.t0);case 19:case"end":return a.stop()}}),a,null,[[9,16]])})))()},orderPayment:function(e){var t=this;if(this.res=e,e.qr_code)this.$emit("qrcode",e);else if(e.order)if("jsapi"===e.provider_pay_type)WeixinJSBridge.invoke("getBrandWCPayRequest",e.order,(function(e){"get_brand_wcpay_request:ok"==e.err_msg?t._getOrder():"get_brand_wcpay_request:cancel"==e.err_msg?t.$emit("cancel",e):"get_brand_wcpay_request:fail"==e.err_msg&&(console.error("getBrandWCPayRequest-fail: ",e),t.$emit("fail",e))}));else{var a=e.order.codeUrl,n=e.order.mwebUrl||e.order.mweb_url;setTimeout((function(){t.openPopup("payConfirmPopup"),window.location.href=a||n}),200)}},openPopup:function(e){this.$refs[e].showPopup||this.$refs[e].open()},closePopup:function(e){this.$refs[e].close()},getOrder:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.getOrder(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},refund:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.refund(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getRefund:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.getRefund(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},closeOrder:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.closeOrder(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getPayProviderFromCloud:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.getPayProviderFromCloud(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getProviderAppId:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.getProviderAppId(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getOpenid:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.getOpenid(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},verifyReceiptFromAppleiap:function(){var e=arguments;return(0,i.default)((0,r.default)().mark((function t(){var a,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},t.prev=1,t.next=4,p.verifyReceiptFromAppleiap(a);case 4:return n=t.sent,"function"===typeof a.success&&a.success(n),t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),"function"===typeof a.fail&&a.fail(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getCode:function(){return(0,i.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},paySuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.closePopup("payPopup"),this.closePopup("payConfirmPopup"),this.clearQrcode(),this.toSuccessPage&&this.pageToSuccess(e),this.$emit("success",e)},pageToSuccess:function(e){if("pc"!==this.modeCom)uni.navigateTo({url:"/uni_modules/uni-pay/pages/success/success?out_trade_no=".concat(e.out_trade_no,"&order_no=").concat(e.pay_order.order_no,"&pay_date=").concat(e.pay_order.pay_date,"&total_fee=").concat(e.pay_order.total_fee,"&adpid=").concat(this.adpid,"&return_url=").concat(this.returnUrl,"&main_color=").concat(this.mainColor)});else if(this.returnUrl){var t=this.returnUrl+"?out_trade_no=".concat(e.out_trade_no,"&order_no=").concat(e.pay_order.order_no);0!==t.indexOf("/")&&(t="/".concat(t)),uni.navigateTo({url:t})}},clearQrcode:function(){this.res.codeUrl="",this.res.qr_code_image=""},_getOrder:function(){var e=this;return(0,i.default)((0,r.default)().mark((function t(){return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getOrder({out_trade_no:e.res.out_trade_no,await_notify:!0,success:function(t){t.has_paid&&(e.closePopup("qrcodePopup"),e.paySuccess(t))}});case 1:case"end":return t.stop()}}),t)})))()},_afreshPayment:function(){this.orderPayment(this.res)},_pcChooseProvider:function(e){if(e!==this.options.provider)return this.createOrder({provider:e})},_appleiapCreateOrder:function(e){var t=this;return(0,i.default)((0,r.default)().mark((function a(){var n,i,o,c,s,u,d,l;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=new appleiapSdk.Iap({products:[e.productid]}),uni.showLoading({title:"加载中..."}),a.next=4,n.init();case 4:return a.next=6,n.getProduct();case 6:return i=a.sent,o=i[0],e.total_fee=100*o.price,e.description=o.description,c={provider:e.provider,total_fee:e.total_fee,order_no:e.order_no,out_trade_no:e.out_trade_no,description:e.description,type:e.type,custom:e.custom},a.next=13,p.createOrder(c);case 13:if(s=a.sent,0!==s.errCode){a.next=49;break}return t.$emit("create",s),t.res=s,uni.showLoading({title:"支付请求中..."}),a.prev=18,t.debug&&console.log("正在请求苹果服务器",e.productid,s.out_trade_no),a.next=22,n.requestPayment({productid:e.productid,username:s.out_trade_no});case 22:if(u=a.sent,t.debug&&console.log("用户支付成功",u),uni.showLoading({title:"正在处理支付结果..."}),u.payment.username||(u.payment.username=t.getAppleiapUserName(u)),u.payment.username){a.next=32;break}return a.next=29,n.finishTransaction(u);case 29:return uni.hideLoading(),console.log("您可能已支付成功，但很抱歉丢单了，请联系客服处理。",u),a.abrupt("return",!1);case 32:return t.addAppleiapOrder(u),a.next=35,t.verifyReceiptFromAppleiap({out_trade_no:u.payment.username,transaction_receipt:u.transactionReceipt,transaction_identifier:u.transactionIdentifier});case 35:if(d=a.sent,0!==d.errCode){a.next=42;break}return a.next=39,n.finishTransaction(u);case 39:t.removeAppleiapOrder(u),uni.hideLoading(),t.paySuccess(d);case 42:a.next=49;break;case 44:a.prev=44,a.t0=a["catch"](18),l=a.t0.errCode||a.t0.code,2===l?(t.debug&&console.log("用户取消支付"),t.$emit("cancel",a.t0)):(console.error("appleiapCreateOrder:fail",a.t0),t.$emit("fail",a.t0)),uni.hideLoading();case 49:case"end":return a.stop()}}),a,null,[[18,44]])})))()},appleiapRestore:function(){var e=this;return(0,i.default)((0,r.default)().mark((function t(){var a,n,i,o,p;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"检测支付环境..."}),a=new appleiapSdk.Iap,t.next=4,a.init();case 4:return t.prev=4,e.debug&&console.log("正在查询是否有漏单信息"),t.next=8,a.restoreCompletedTransactions({username:""});case 8:if(n=t.sent,e.debug&&console.log("漏单查询结果："+(0===n.length?"未漏单":"有漏单"),n),n.length){t.next=12;break}return t.abrupt("return");case 12:i=0;case 13:if(!(i<n.length)){t.next=42;break}o=n[i],t.t0=o.transactionState,t.next=t.t0===appleiapSdk.IapTransactionState.purchased?18:t.t0===appleiapSdk.IapTransactionState.failed?35:38;break;case 18:if(o.payment.username||(o.payment.username=e.getAppleiapUserName(o)),o.payment.username){t.next=24;break}return t.next=22,a.finishTransaction(o);case 22:return console.log("您可能已支付成功，但很抱歉丢单了，请联系客服处理。",o),t.abrupt("continue",39);case 24:return console.log("requestPaymentRes: ",o),t.next=27,e.verifyReceiptFromAppleiap({out_trade_no:o.payment.username,transaction_receipt:o.transactionReceipt,transaction_identifier:o.transactionIdentifier});case 27:if(p=t.sent,console.log("verifyRes: ",p),0!==p.errCode){t.next=34;break}return console.log("完结订单："+o.payment.username),t.next=33,a.finishTransaction(o);case 33:e.removeAppleiapOrder(o);case 34:return t.abrupt("break",39);case 35:return t.next=37,a.finishTransaction(o);case 37:return t.abrupt("break",39);case 38:return t.abrupt("break",39);case 39:i++,t.next=13;break;case 42:t.next=47;break;case 44:t.prev=44,t.t1=t["catch"](4),console.error(t.t1);case 47:return t.prev=47,uni.hideLoading(),t.finish(47);case 50:case"end":return t.stop()}}),t,null,[[4,44,47,50]])})))()},addAppleiapOrder:function(e){var t="uni-pay-appleiap-order",a=uni.getStorageSync(t)||[];a.push(e),uni.setStorageSync(t,a)},getAppleiapUserName:function(e){var t=uni.getStorageSync("uni-pay-appleiap-order")||[],a=t.find((function(t){return t.transactionIdentifier===e.transactionIdentifier&&t.transactionDate===e.transactionDate})),n=a&&a.payment&&a.payment.username;return n},removeAppleiapOrder:function(e){var t="uni-pay-appleiap-order",a=uni.getStorageSync(t)||[],n=a.findIndex((function(t){return t.transactionIdentifier===e.transactionIdentifier&&t.transactionDate===e.transactionDate}));n>-1&&a.splice(n,1),uni.setStorageSync(t,a)}},watch:{},computed:{modeCom:function(){if(this.mode)return this.mode;var e=uni.getSystemInfoSync();return e&&"pc"===e.deviceType?"pc":"mobile"}}};t.default=c}).call(this,a("a9ff")["default"])},"370d":function(e,t,a){"use strict";a.r(t);var n=a("cf57"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"3d11":function(e,t,a){"use strict";a.r(t);var n=a("2b96"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},4479:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"delivery-way",data:function(){return{selectedway:"outsend"}},props:{addressInfor:{type:Object,default:function(){return{}}}},methods:{selectway:function(e){this.selectedway=e},toAddressPage:function(){uni.navigateTo({url:"/pages/address/list"})}}};t.default=n},4662:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={deliveryWay:a("d926").default,goodsList:a("7e3e").default,uIcon:a("3915").default,carLayout:a("79bc").default,uniPay:a("8f69").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"surePage"},[a("delivery-way",{attrs:{addressInfor:e.addressInfos}}),a("v-uni-view",{staticClass:"goodlist"},[a("goods-list",{attrs:{cartList:e.carts,totalMon:e.totalPrice,totalOrgMon:e.totalOrgrinPrice}})],1),a("v-uni-view",{staticClass:"payWay"},e._l(e.paywayList,(function(t,n){return a("v-uni-view",{key:t.code,class:{payzfb:"zhifubao"==t.code,paywx:"zhifubao"!==t.code,unactive:t.code!==e.selectPay},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.choosePayway(t.code)}}},[a("u-icon",{attrs:{name:t.code,size:"26",color:"zhifubao"==t.code?"#1777ff":"#21ad38"}}),a("v-uni-text",{staticClass:"fontclass"},[e._v(e._s(t.name))])],1)})),1),a("v-uni-view",{staticClass:"bottomCar"},[e.totalCount?a("car-layout",{attrs:{type:"pay",btnLoading:e.btnLoading,address:e.addressInfos.address},on:{confirmPay:function(t){arguments[0]=t=e.$handleEvent(t),e.onConfirmPay.apply(void 0,arguments)}}}):e._e()],1),a("uni-pay",{ref:"pay",attrs:{returnUrl:"pages/myOrders/myOrders"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.paySuccess.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.payCancel.apply(void 0,arguments)},create:function(t){arguments[0]=t=e.$handleEvent(t),e.payCreate.apply(void 0,arguments)}}})],1)},i=[]},"4ed0":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/**\n * 自定义颜色\n */.waywrap[data-v-12dca776]{background-color:#fff;border-radius:%?10?%}.waywrap .deliveryhead[data-v-12dca776]{width:100%;display:flex;line-height:%?80?%;background-color:#f7f7f7}.waywrap .deliveryhead .outsend[data-v-12dca776]{width:50%;display:flex;justify-content:center;align-items:center}.waywrap .deliveryhead .active[data-v-12dca776]{color:red;background-color:#fff}.waywrap .deliveryhead .selfget[data-v-12dca776]{width:50%;display:flex;justify-content:center;align-items:center}.waywrap .deliverycontent[data-v-12dca776]{padding:%?20?%;font-size:%?22?%}.waywrap .deliverycontent .sendway[data-v-12dca776]{background-color:#f7f7f7;display:flex;border-radius:%?10?%;padding:0 %?20?%;justify-content:space-between}.waywrap .deliverycontent .sendway .waytitle[data-v-12dca776], .waywrap .deliverycontent .sendway .wayicon[data-v-12dca776]{height:%?160?%;display:flex;align-items:center}.waywrap .deliverycontent .sendway .wayaddress[data-v-12dca776]{flex:1}.waywrap .deliverycontent .sendway .wayaddress .waytips[data-v-12dca776]{height:%?160?%;padding:0 %?20?%;display:flex;align-items:center;font-size:%?32?%}.waywrap .deliverycontent .sendway .wayaddress .wayaddresswrap[data-v-12dca776]{height:%?160?%;padding:0 %?20?%;display:flex;justify-content:center;flex-direction:column}.waywrap .deliverycontent .sendway .wayaddress .wayaddresswrap .addway[data-v-12dca776]{margin-bottom:%?10?%}',""]),e.exports=t},"7ce7":function(e,t,a){"use strict";var n=a("c071"),r=a.n(n);r.a},"7d03":function(e,t,a){"use strict";var n=a("c3fd"),r=a.n(n);r.a},"7e3e":function(e,t,a){"use strict";a.r(t);var n=a("cc47"),r=a("17ef");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("8344");var o=a("f0c5"),p=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"09230130",null,!1,n["a"],void 0);t["default"]=p.exports},8344:function(e,t,a){"use strict";var n=a("1c68"),r=a.n(n);r.a},"85f2":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={uniPopup:a("ddfa").default,uniList:a("58be").default,uniListItem:a("408f").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"uni-pay"},["pc"===e.modeCom?a("uni-popup",{ref:"payPopup",attrs:{type:"center","safe-area":!1}},[a("v-uni-view",{staticClass:"pc-pay-popup"},[a("v-uni-view",{staticClass:"pc-pay-popup-title"},[e._v("收银台")]),a("v-uni-view",{staticClass:"pc-pay-popup-flex"},[a("v-uni-view",{staticClass:"pc-pay-popup-qrcode-box"},[a("v-uni-image",{staticClass:"pc-pay-popup-qrcode-image",attrs:{src:e.res.qr_code_image}}),a("v-uni-view",{staticClass:"pc-pay-popup-amount-box"},[a("v-uni-view",{staticClass:"pc-pay-popup-amount-tips"},[e._v("扫一扫付款")]),a("v-uni-view",{staticClass:"pc-pay-popup-amount"},[e._v(e._s((e.options.total_fee/100).toFixed(2)))])],1),e.res.qr_code_image?a("v-uni-view",{staticClass:"pc-pay-popup-complete-button"},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._getOrder()}}},[e._v("我已完成支付")])],1):e._e()],1),a("v-uni-view",{staticClass:"pc-pay-popup-provider-list"},[e.currentProviders.indexOf("wxpay")>-1?a("v-uni-view",{staticClass:"pc-pay-popup-provider-item",class:"wxpay"==e.options.provider?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._pcChooseProvider("wxpay")}}},[a("v-uni-image",{staticClass:"pc-pay-popup-provider-image",attrs:{src:e.images.wxpay}}),a("v-uni-text",{staticClass:"pc-pay-popup-provider-text"},[e._v("微信支付")])],1):e._e(),e.currentProviders.indexOf("alipay")>-1?a("v-uni-view",{staticClass:"pc-pay-popup-provider-item",class:"alipay"==e.options.provider?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._pcChooseProvider("alipay")}}},[a("v-uni-image",{staticClass:"pc-pay-popup-provider-image",attrs:{src:e.images.alipay}}),a("v-uni-text",{staticClass:"pc-pay-popup-provider-text"},[e._v("支付宝支付")])],1):e._e(),a("v-uni-view",{staticClass:"pc-pay-popup-logo"},[a("v-uni-image",{attrs:{src:e.logo,mode:"widthFix"}})],1)],1)],1)],1)],1):a("uni-popup",{ref:"payPopup",attrs:{type:"bottom","safe-area":!1}},[a("v-uni-view",{staticClass:"mobile-pay-popup",style:"min-height: "+e.height+";"},[a("v-uni-view",{staticClass:"mobile-pay-popup-title"},[e._v("收银台")]),a("v-uni-view",{staticClass:"mobile-pay-popup-amount-box"},[a("v-uni-view",[e._v("待支付金额：")]),a("v-uni-view",{staticClass:"mobile-pay-popup-amount"},[e._v(e._s((e.options.total_fee/100).toFixed(2)))])],1),a("v-uni-view",{staticClass:"mobile-pay-popup-provider-list"},[a("uni-list",[e.currentProviders.indexOf("wxpay")>-1?a("uni-list-item",{attrs:{thumb:e.images.wxpay,title:"微信支付",clickable:!0,link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createOrder({provider:"wxpay"})}}}):e._e(),e.currentProviders.indexOf("alipay")>-1?a("uni-list-item",{attrs:{thumb:e.images.alipay,title:"支付宝",clickable:!0,link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createOrder({provider:"alipay"})}}}):e._e()],1)],1)],1)],1),a("uni-popup",{ref:"qrcodePopup",attrs:{type:"center","safe-area":!1,animation:!1,"mask-click":!1},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.clearQrcode.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"qrcode-popup-content"},[a("v-uni-image",{staticClass:"qrcode-image",attrs:{src:e.res.qr_code_image}}),a("v-uni-view",{staticClass:"qrcode-popup-info"},[a("v-uni-view",[a("v-uni-text",{staticClass:"qrcode-popup-info-fee"},[e._v(e._s((e.options.total_fee/100).toFixed(2)))]),a("v-uni-text",[e._v("元")])],1),"wxpay"==e.options.provider?a("v-uni-view",[e._v("请用微信扫码支付")]):"alipay"==e.options.provider?a("v-uni-view",[e._v("请用支付宝扫码支付")]):e._e()],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._getOrder()}}},[e._v("我已完成支付")]),a("v-uni-view",{staticClass:"qrcode-popup-cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopup("qrcodePopup")}}},[e._v("暂不支付")])],1)],1),a("uni-popup",{ref:"payConfirmPopup",attrs:{type:"center","safe-area":!1,animation:!1,"mask-click":!1}},[a("v-uni-view",{staticClass:"pay-confirm-popup-content"},[a("v-uni-view",{staticClass:"pay-confirm-popup-title"},[e._v("请确认支付是否已完成")]),a("v-uni-view",[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._getOrder()}}},[e._v("已完成支付")])],1),a("v-uni-view",{staticClass:"pay-confirm-popup-refresh"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._afreshPayment()}}},[e._v("支付遇到问题，重新支付")])],1),a("v-uni-view",{staticClass:"pay-confirm-popup-cancel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePopup("payConfirmPopup")}}},[e._v("暂不支付")])],1)],1)],1)},i=[]},"8f69":function(e,t,a){"use strict";a.r(t);var n=a("85f2"),r=a("3d11");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("d637");var o=a("f0c5"),p=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"2e72cd58",null,!1,n["a"],void 0);t["default"]=p.exports},"8faa":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/**\n * 自定义颜色\n */.wrap[data-v-09230130]{padding:%?10?% %?30?%;margin-top:%?20?%;background-color:#fff;display:flex;flex-direction:column}.wrap .goodlistheader[data-v-09230130]{height:%?80?%;display:flex;align-items:center;border-bottom:1px solid #efefef}.wrap .scroContent[data-v-09230130]{max-height:%?450?%}.wrap .scroContent .content[data-v-09230130]{flex:1;display:flex;margin:%?20?% 0;justify-content:space-between;align-items:center;color:#676767}.wrap .scroContent .content .left[data-v-09230130]{display:flex;align-items:center}.wrap .scroContent .content .left .pic[data-v-09230130]{width:%?50?%;height:%?50?%}.wrap .scroContent .content .left .pic .img[data-v-09230130]{width:100%;height:100%}.wrap .scroContent .content .left .proname[data-v-09230130]{margin-left:%?10?%;margin-right:%?10?%}.wrap .scroContent .content .middle[data-v-09230130]{display:flex}.wrap .scroContent .content .right[data-v-09230130]{display:flex;flex-direction:column;align-items:end}.wrap .scroContent .content .right .big[data-v-09230130]{font-weight:700;color:#333131}.wrap .scroContent .content .right .small[data-v-09230130]{font-size:%?20?%;color:#a7a7a7;text-decoration:line-through}.wrap .goodlistbottom[data-v-09230130]{border-top:1px solid #efefef;height:%?80?%;display:flex;justify-content:end;align-items:center;color:#a7a7a7;font-size:%?26?%}.wrap .goodlistbottom .totalMon[data-v-09230130]{font-weight:700;font-size:%?32?%;color:#333131}',""]),e.exports=t},"904a":function(e,t,a){"use strict";a.r(t);var n=a("4662"),r=a("370d");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("7ce7");var o=a("f0c5"),p=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"0054acb0",null,!1,n["a"],void 0);t["default"]=p.exports},9480:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/**\n * 自定义颜色\n */uni-page-body[data-v-0054acb0]{background-color:#f7f7f7}body.?%PAGE?%[data-v-0054acb0]{background-color:#f7f7f7}.surePage[data-v-0054acb0]{padding:%?20?%}.surePage .goodlist[data-v-0054acb0]{margin-bottom:%?30?%}.surePage .payWay[data-v-0054acb0]{margin-bottom:%?30?%;display:flex;align-items:center;justify-content:space-between}.surePage .payWay .payzfb[data-v-0054acb0]{border:1px solid #1777ff;color:#1777ff;height:%?70?%;align-items:center;background-color:#fff;border-radius:%?8?%;width:49%;display:flex;justify-content:center}.surePage .payWay .payzfb .fontclass[data-v-0054acb0]{margin-left:%?10?%}.surePage .payWay .paywx[data-v-0054acb0]{border:1px solid #21ad38;color:#21ad38;height:%?70?%;align-items:center;background-color:#fff;border-radius:%?8?%;width:49%;display:flex;justify-content:center}.surePage .payWay .paywx .fontclass[data-v-0054acb0]{margin-left:%?10?%}.surePage .payWay .unactive[data-v-0054acb0]{-webkit-filter:grayscale(1);filter:grayscale(1)}.surePage .bottomCar[data-v-0054acb0]{width:100%;position:fixed;left:0;bottom:0}',""]),e.exports=t},bc67:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("a9e3");var n=a("4a51"),r={name:"goods-list",props:{cartList:{type:Array,default:function(){return[]}},totalMon:{type:Number,default:0},totalOrgMon:{type:Number,default:0}},data:function(){return{}},methods:{priceFormat:n.priceFormat}};t.default=r},c071:function(e,t,a){var n=a("9480");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("37544ca0",n,!0,{sourceMap:!1,shadowMode:!1})},c3fd:function(e,t,a){var n=a("4ed0");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("5e0d26ee",n,!0,{sourceMap:!1,shadowMode:!1})},cc47:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={uIcon:a("3915").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"goodlistheader"},[e._v("共"+e._s(e.cartList.length)+"件商品")]),a("v-uni-scroll-view",{staticClass:"scroContent",attrs:{"scroll-with-animation":!0,"scroll-y":!0}},e._l(e.cartList,(function(t){return a("v-uni-view",{key:t._id,staticClass:"content"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-view",{staticClass:"pic"},[a("v-uni-image",{staticClass:"img",attrs:{src:t.imageValue[0].url,mode:"aspectFill"}})],1),a("v-uni-text",{staticClass:"proname"},[e._v(e._s(t.name))]),a("u-icon",{attrs:{name:"close",size:"10"}}),e._v(e._s(t.selectCounts))],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-text",{staticClass:"big"},[e._v("¥"+e._s(e.priceFormat(t.price)))]),a("v-uni-text",{staticClass:"small"},[e._v("¥"+e._s(e.priceFormat(t.originPrice)))])],1)],1)})),1),a("v-uni-view",{staticClass:"goodlistbottom"},[a("v-uni-text",[e._v("已优惠"+e._s(e.priceFormat(e.totalOrgMon-e.totalMon))+"，合计")]),a("v-uni-text",{staticClass:"totalMon"},[e._v("¥"+e._s(e.priceFormat(e.totalMon)))])],1)],1)},i=[]},cf57:function(e,t,a){"use strict";(function(e){a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("c7eb")),i=n(a("1da1")),o=n(a("5530")),p=a("26cb"),c=e.importObject("bobokeji-address"),s=e.importObject("bobokeji-orders"),u={data:function(){return{selectPay:"weixin-fill",paywayList:[{name:"支付宝",code:"zhifubao"},{name:"微信",code:"weixin-fill"}],btnLoading:!1}},computed:(0,o.default)({},(0,p.mapGetters)(["totalCount","carts","totalPrice","totalOrgrinPrice","addressInfos"])),methods:(0,o.default)((0,o.default)({},(0,p.mapMutations)(["setAddressInfo","clearCarts"])),{},{choosePayway:function(e){this.selectPay=e},onConfirmPay:function(){var e=this;return(0,i.default)((0,r.default)().mark((function t(){var a,n,i;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnLoading=!0,a={addressInfor:e.addressInfos,carts:e.carts,createTime:Date.now(),payType:"weixin-fill"==e.selectPay?"wxpay":"alipay",status:0,total_fee:e.totalPrice,done:!1,deliveryWay:"send"},t.next=4,s.add(a);case 4:n=t.sent,i=n+"_"+String(Math.random()).substring(3,9),console.log(a),e.$refs.pay.createOrder({provider:"weixin-fill"==e.selectPay?"wxpay":"alipay",total_fee:e.totalPrice,type:"recharge",order_no:n,out_trade_no:i,description:"波波科技支付下单"}),console.log("准备支付","weixin-fill"==e.selectPay?"wxpay":"alipay");case 9:case"end":return t.stop()}}),t)})))()},paySuccess:function(e){this.btnLoading=!1,this.clearCarts()},payCancel:function(e){},payCreate:function(e){}}),onLoad:function(){var e=this;return(0,i.default)((0,r.default)().mark((function t(){var a,n,i,o,p,s,u;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.addressInfos,!e.addressInfos.address){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,c.getDefaultAddress();case 5:n=t.sent,n.data.length>0&&(i=n.data[0],o=i.name,p=i.phone,s=i.addressName,u=i.detailaddress,a={name:o,phone:p,address:s+u}),e.setAddressInfo(a);case 8:case"end":return t.stop()}}),t)})))()}};t.default=u}).call(this,a("a9ff")["default"])},d281:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/**\n * 自定义颜色\n */.uni-pay[data-v-2e72cd58]{--bgcolor:#f3f3f3}\n/* 手机版收银台弹窗开始 */.mobile-pay-popup[data-v-2e72cd58]{min-height:70vh;background-color:var(--bgcolor);border-radius:%?30?% %?30?% 0 0;overflow:hidden}.mobile-pay-popup .mobile-pay-popup-title[data-v-2e72cd58]{background-color:#fff;text-align:center;font-weight:700;font-size:%?40?%;padding:%?20?%}.mobile-pay-popup .mobile-pay-popup-amount-box[data-v-2e72cd58]{background-color:#fff;padding:%?30?%}.mobile-pay-popup .mobile-pay-popup-amount-box .mobile-pay-popup-amount[data-v-2e72cd58]{color:#e43d33;font-size:%?60?%;margin-top:%?20?%}.mobile-pay-popup .mobile-pay-popup-provider-list[data-v-2e72cd58]{background-color:#fff;margin-top:%?20?%}\n/* 手机版收银台弹窗结束 */\n/* PC版收银台弹窗开始 */.pc-pay-popup[data-v-2e72cd58]{width:800px;height:600px;background-color:var(--bgcolor);border-radius:10px;overflow:hidden}.pc-pay-popup .pc-pay-popup-title[data-v-2e72cd58]{background-color:#fff;text-align:center;font-weight:700;font-size:20px;height:66px;line-height:66px}.pc-pay-popup .pc-pay-popup-flex[data-v-2e72cd58]{width:100%;display:flex}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box[data-v-2e72cd58]{height:calc(600px - 66px);flex:1;background-color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box .pc-pay-popup-qrcode-image[data-v-2e72cd58]{width:225px;height:225px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box .pc-pay-popup-amount-box[data-v-2e72cd58]{text-align:center}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box .pc-pay-popup-amount-box .pc-pay-popup-amount-tips[data-v-2e72cd58]{color:#333;font-size:20px;margin-top:20px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box .pc-pay-popup-amount-box .pc-pay-popup-amount[data-v-2e72cd58]{color:#dd524d;font-weight:700;font-size:32px;margin-top:20px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-qrcode-box .pc-pay-popup-complete-button[data-v-2e72cd58]{margin-top:20px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list[data-v-2e72cd58]{width:300px;display:flex;flex-direction:column}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-provider-item[data-v-2e72cd58]{padding:20px;display:flex;align-items:center}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-provider-item .pc-pay-popup-provider-image[data-v-2e72cd58]{width:60px;height:60px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-provider-item .pc-pay-popup-provider-text[data-v-2e72cd58]{color:#333;font-size:20px;margin-left:10px}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-provider-item.active[data-v-2e72cd58]{background-color:#fff}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-provider-item[data-v-2e72cd58]:hover{background-color:#fff;cursor:pointer}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-logo[data-v-2e72cd58]{flex:1;display:flex;align-items:center;justify-content:center}.pc-pay-popup .pc-pay-popup-flex .pc-pay-popup-provider-list .pc-pay-popup-logo uni-image[data-v-2e72cd58]{width:120px}\n/* PC版收银台弹窗结束 */\n/* 二维码支付弹窗开始 */.qrcode-popup-content[data-v-2e72cd58]{width:%?600?%;background-color:#fff;border-radius:%?10?%;padding:%?40?%;box-sizing:border-box;text-align:center}.qrcode-popup-content .qrcode-image[data-v-2e72cd58]{width:%?450?%;height:%?450?%}.qrcode-popup-content .qrcode-popup-info[data-v-2e72cd58]{text-align:center;padding:%?20?%}.qrcode-popup-content .qrcode-popup-info .qrcode-popup-info-fee[data-v-2e72cd58]{color:red;font-size:%?60?%;font-weight:700}.qrcode-popup-content .qrcode-popup-cancel[data-v-2e72cd58]{margin-top:%?20?%;text-align:center}\n/* 二维码支付弹窗结束 */\n/* 外部浏览器H5支付弹窗确认开始 */.pay-confirm-popup-content[data-v-2e72cd58]{width:%?550?%;background-color:#fff;border-radius:%?10?%;padding:%?40?%}.pay-confirm-popup-content .pay-confirm-popup-title[data-v-2e72cd58]{text-align:center;padding:%?20?% 0;margin-bottom:%?30?%}.pay-confirm-popup-content .pay-confirm-popup-refresh[data-v-2e72cd58]{margin-top:%?20?%}.pay-confirm-popup-content .pay-confirm-popup-cancel[data-v-2e72cd58]{margin-top:%?20?%;text-align:center}\n/* 外部浏览器H5支付弹窗确认结束 */',""]),e.exports=t},d5d0:function(e,t,a){"use strict";a.r(t);var n=a("4479"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},d637:function(e,t,a){"use strict";var n=a("01b1"),r=a.n(n);r.a},d926:function(e,t,a){"use strict";a.r(t);var n=a("e4d0"),r=a("d5d0");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("7d03");var o=a("f0c5"),p=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"12dca776",null,!1,n["a"],void 0);t["default"]=p.exports},e4d0:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={uIcon:a("3915").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"waywrap"},[a("v-uni-view",{staticClass:"deliveryhead"},[a("v-uni-view",{staticClass:"outsend",class:{active:"outsend"==e.selectedway},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectway("outsend")}}},[e._v("外送")]),a("v-uni-view",{staticClass:"selfget",class:{active:"selfget"==e.selectedway},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectway("selfget")}}},[e._v("自提")])],1),a("v-uni-view",{staticClass:"deliverycontent"},["outsend"==e.selectedway?a("v-uni-view",{staticClass:"sendway"},[a("v-uni-view",{staticClass:"waytitle"},[e._v("收货地址:")]),a("v-uni-view",{staticClass:"wayaddress",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toAddressPage.apply(void 0,arguments)}}},[e.addressInfor.address?a("v-uni-view",{staticClass:"wayaddresswrap"},[a("v-uni-view",{staticClass:"addway"},[e._v(e._s(e.addressInfor.address))]),a("v-uni-view",{staticClass:"wayphone"},[e._v(e._s(e.addressInfor.name)+"-"+e._s(e.addressInfor.phone))])],1):a("v-uni-view",{staticClass:"waytips"},[e._v("请选择您的收货地址")])],1),a("v-uni-view",{staticClass:"wayicon",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toAddressPage.apply(void 0,arguments)}}},[a("u-icon",{attrs:{name:"arrow-right"}})],1)],1):a("v-uni-view",{staticClass:"getway"},[e._v("自提展示的模块(开发中....)")])],1)],1)},i=[]}}]);